<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/">
<head>
<title>Just Map It! Feeds for Netvibes</title>
<meta name="author" content="Social Computing" />
<meta name="email" content="mapyourfeeds@social-computing.com" />
<meta name="website" content="http://www.social-computing.com" />
<meta name="description" content="View and navigate your feeds thru an interactive map! by Social Computing" />
<meta name="keywords" content="rss, feeds, feed, map, cartography, visualization, social, blog, gadget, widget, social computing, category, representation, information" />
<meta name="version" content="1.0 alpha" />
<meta name="screenshot" content="http://feeds.just-map-it.com/images/screenshot.png" />
<meta name="thumbnail" content="http://feeds.just-map-it.com/images/thumbnail.png" />
<meta name="autoRefresh" content="120" />
<link rel="shortcut icon" href="http://feeds.just-map-it.com/favicon.ico" />
<link rel="stylesheet" type="text/css"  href="http://www.netvibes.com/themes/uwa/style.css" />
<script type="text/javascript"  src="http://www.netvibes.com/js/UWA/load.js.php?env=Standalone"></script>
<widget:preferences>
	<preference name="feed" type="text" label="Feed" defaultValue="http://www.social-computing.com/feed/" />
</widget:preferences>
<script type="text/javascript" language="javascript">
widget.onLoad = function() {
	var flashvars = {
		allowDomain: "*",
		wpsserverurl: "http%3A%2F%2Fmap.social-computing.com%2F",
		wpsplanname: "Feeds",
			analysisProfile: "GlobalProfile",
			feed: widget.getValue( "feed")
	};
	var fv='';
	for (var prop in flashvars) {
		if (fv) fv=fv+String.fromCharCode(38);
		fv=fv + prop + '=' + flashvars[prop];
	}
	var contentHtml = '';
	contentHtml = contentHtml + '<div id="map" style="margin: 0 auto;text-align:center;">';
	contentHtml += '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="wps-feeds" name="wps-feeds" align="middle"';
	contentHtml += 'width="' + widget.body.getDimensions().width '" height="' + widget.body.getDimensions().width + '" >';
    <!--[if !IE]>-->
	contentHtml += '<object type="application/x-shockwave-flash" id="wps-feeds" name="wps-feeds"';
	contentHtml += 'width="' + widget.body.getDimensions().width '" height="' + widget.body.getDimensions().width + '">';
    <!--<![endif]-->
	contentHtml += '<param name="movie" value="http://feeds.just-map-it.com/client/wps-flex-1.0-SNAPSHOT.swf"/>';
	contentHtml += '<param name="quality" value="high"/>';
	contentHtml += '<param name="bgcolor" value="#FFFFFF"/>';
	contentHtml += '<param name="allowscriptaccess" value="always"/>';
	contentHtml += '<param name="allowfullscreen" value="true"/>';
	contentHtml += '<param name="flashvars" value="'+ fv +'"/>';
	//contentHtml += '<param name="wmode" value="opaque" />';
	contentHtml += '</object>';
    <!--[if !IE]>-->
	contentHtml += '</object>';
    <!--<![endif]-->
	contentHtml = contentHtml + '</div>';

	widget.setBody(contentHtml);
	//widget.onResize();
}

function getMap() {
	return document.getElementById('wps-feeds').childNodes[0];
}

function empty() {
	alert( "Sorry, map is empty");
}
function ready() {
// do something here
}
function status( status) {
// do something here
}
function error( error) {
	alert( error);
}
function JMIF_Navigate( url) {
	window.open( url, "_blank");
}
function JMIF_Focus( args)
{
	var parameters = {};
	parameters["entityId"] = args[0];
	parameters["feed"] = args[2];
	getMap().compute( parameters);
}
function JMIF_Center( args)
{
	var parameters = {};
	parameters["attributeId"] = args[0];
	parameters["analysisProfile"] = "DiscoveryProfile";
	parameters["feed"] = args[2];
	getMap().compute( parameters);
}
widget.onResize = function() {
	var elements = widget.body.getElementsByTagName("object");
	var flash = elements[0];
	if (flash) {
		flash.width = widget.body.getDimensions().width;
		flash.height = widget.body.getDimensions().height;
	}
}
</script>
</head>
<body>
<p>Loading...</p>
</body>
</html>
